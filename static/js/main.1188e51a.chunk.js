(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(23)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),i=a.n(o),c=(a(16),a(1)),l=a(9),s=a(2),u=a(4),f=a(3),m=a(5),v=(a(17),a(8)),p=(a(18),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(f.a)(t).call(this))).handleClick=function(t){var a=e.props,n=a.addFavorite,r=a.removeFavorite,o=a.id,i=!e.state.favorited;i?n(o):r(o),e.setState({favorited:i})},e.state={favorited:!1},e}return Object(m.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.favorited;this.setState({favorited:e})}},{key:"render",value:function(){var e=this,t=this.state.favorited?"favorited":"",a=this.state.favorited?"Unfavorite":"Favorite",n=0,o=Object.keys(this.props).map(function(t){return n+=1,"id"!==t&&"addFavorite"!==t&&"removeFavorite"!==t&&"favorited"!==t&&r.a.createElement("div",null,r.a.createElement("h4",{key:n},t),r.a.createElement("p",null," ",e.props[t]))});return r.a.createElement("article",{className:"Card "+t},o,r.a.createElement("button",{onClick:this.handleClick},a))}}]),t}(n.Component)),d=(a(19),function(e){var t=e.items,a=e.favorites,n=e.addFavorite,o=e.removeFavorite,i=e.currentDisplay,c=t.map(function(e,t){var i=!!a.find(function(t){return t.id===e.id});return r.a.createElement(p,Object.assign({},e,{favorited:i,addFavorite:n,removeFavorite:o,key:e.id+t}))});return"favorites"===i&&0===a.length&&(c=r.a.createElement("h2",null,"No Favorites To Display")),r.a.createElement("div",null,r.a.createElement("h2",{className:"currentDisplay"},i),r.a.createElement("div",{className:"CardContainer"},c))}),h=(a(20),function(e){var t=e.film,a=t.title,n=t.opening_crawl,o=t.release_date;return r.a.createElement("div",{className:"Crawl"},r.a.createElement("h2",null,a),r.a.createElement("h3",null,n),r.a.createElement("h3",null,"Film Released: ",o))}),g=(a(21),function(e){var t=e.changeCategory,a=e.totalFavorites;return r.a.createElement("section",{className:"Buttons"},r.a.createElement("button",{name:"people",onClick:function(e){return t(e)}},"People"),r.a.createElement("button",{name:"planets",onClick:function(e){return t(e)}},"Planets"),r.a.createElement("button",{name:"vehicles",onClick:function(e){return t(e)}},"Vehicles"),r.a.createElement("button",{name:"favorites",onClick:function(e){return t(e)}},"View Favorites ",a))}),E=(a(22),function(e){var t=e.totalFavorites,a=e.changeCategory;return r.a.createElement("header",{className:"Header"},r.a.createElement("h1",null,r.a.createElement("img",{src:"https://fontmeme.com/permalink/190506/2f9decc54ab5c68a61423e6ffce47f73.png",alt:"star-wars-api-font"})),r.a.createElement(g,{totalFavorites:t,changeCategory:a}))}),b=function(e){return fetch(e).then(function(e){if(e.ok)return e.json();throw Error("Error fetching data")})},w=function(){var e=["https://swapi.co/api/people","https://swapi.co/api/planets","https://swapi.co/api/vehicles"].map(function(e){return b(e)});return Promise.all(e)};function C(e){return e.map(function(e,t){return function(e,t){var a=e.homeworld,n=e.name,r=e.species,o={Name:n,id:Date.now()+4e3+t},i=[b(a),b(r)];return Promise.all(i).then(function(e){return o.Species=e[1].name,o.Homeworld=e[0].name,o.Population=e[0].population,o})}(e,t)})}function F(e){return e.map(function(e,t){return function(e,t){var a=e.climate,n=e.name,r=e.terrain,o=e.population,i=e.residents;return i=i.length,{Name:n,id:Date.now()+2e3+t,Climate:a,Terrain:r,Population:o,Residents:i}}(e,t)})}function y(e){return e.map(function(e,t){return function(e,t){var a=e.name,n=e.model,r=e.vehicle_class,o=e.passengers;return{Name:a,id:Date.now()+6e3+t,Model:n,Class:r,"Passenger Capacity":o}}(e,t)})}function O(e){e=JSON.stringify(e),localStorage.setItem("state",e)}var j=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(f.a)(t).call(this))).componentDidUpdate=function(){O(e.state)},e.componentDidMount=function(){if(localStorage.getItem("state"))return e.setState(Object(l.a)({},JSON.parse(localStorage.getItem("state"))));var t=Math.floor(1*Math.random()+1);b("https://swapi.co/api/films/".concat(t)).then(function(t){return e.setState({film:t,loaded:!0})}).catch(function(t){return e.setState({error:t.message})}),w().then(function(t){var a=t[0].results,n=t[1].results,r=t[2].results;a=C(a),n=F(n),r=y(r),Promise.all(a).then(function(t){e.setState({people:t,planets:n,vehicles:r}),O(e.state)})})},e.changeCategory=function(t){e.setState({currentDisplay:t.target.name})},e.addFavorite=function(t){if(!e.state.favorites.find(function(e){return e.id===t})){var a=e.state,n=a.people,r=a.planets,o=a.vehicles,i=[].concat(Object(c.a)(n),Object(c.a)(r),Object(c.a)(o)).find(function(e){return e.id===t}),l=[].concat(Object(c.a)(e.state.favorites),[i]);e.setState({favorites:l})}},e.removeFavorite=function(t){var a=e.state.favorites.filter(function(e){return e.id!==t});e.setState({favorites:a})},e.render=function(){var t=e.state,a=t.loaded,n=t.currentDisplay,o=t.film,i=t.error,c="Loading...";return a&&(c="crawl"===n?r.a.createElement(h,{film:o}):r.a.createElement(d,{addFavorite:e.addFavorite,removeFavorite:e.removeFavorite,items:e.state[n],favorites:e.state.favorites,currentDisplay:n})),i&&(c=r.a.createElement("h1",null,i)),r.a.createElement("div",{className:"App"},r.a.createElement(E,{totalFavorites:e.state.favorites.length,changeCategory:e.changeCategory}),c)},e.state={loaded:!1,currentDisplay:"crawl",film:{},people:[],planets:[],vehicles:[],favorites:[],error:""},e}return Object(m.a)(t,e),t}(n.Component);i.a.render(r.a.createElement(j,null),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.1188e51a.chunk.js.map